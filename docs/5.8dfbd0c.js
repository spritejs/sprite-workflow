(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{56:function(s,t,a){"use strict";a.r(t);var r={components:{}},n=a(8),e=Object(n.a)(r,function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("section",[a("h2",[s._v("自定义Link显示内容")]),s._v(" "),s._m(0),s._v(" "),s._m(1),s._v(" "),a("block-demo",{attrs:{tip:"",source:"const { Workflow, Link, Step } = window.spriteWorkflow;\nconst {Polygon,Label,Polyline,Triangle} = window.spritejs;\nlet stepObject1 = {id: &#39;abc-123&#39;,pos:[ 100, 20 ],text: &#39;我是矩形1&#39;};\nlet stepObject2 = {id: &#39;abc-234&#39;,pos:[ 200, 200 ],text: &#39;我是矩形2&#39;};\nlet workflow = new Workflow({\n  selector:&#39;.block-demo .demo&#39;,size:[ 400, 300 ],\n  zoom: false\n});\nlet step1 = new Step(stepObject1); // 创建step\nlet step2 = new Step(stepObject2);\n\n//let linkObject = {startStepId:&#39;abc-123&#39;,drawType:&#39;line-abc&#39;,endStepId:&#39;abc-234&#39;};\nlet linkObject = {startStepId:&#39;abc-123&#39;,drawType:&#39;polyline-abc&#39;,endStepId:&#39;abc-234&#39;};\nlet link = new Link(linkObject,{\n  draw:function(){\n    this.$link = new Polyline();\n    this.$arrow = new Triangle();\n    const { startPoint, endPoint } = this.attr();\n    this.$link.attr({lineDash:[6,6],lineDashOffset:6,points: [ startPoint, endPoint ], lineWidth: 1, color: &#39;#0ff&#39;});\n    this.$arrow.attr({ color: &#39;#0ff&#39;, pos: [ endPoint ], sides: [ 8, 8 ], angle: 45, fillColor: &#39;#0ff&#39; })\n    this.append(this.$link);\n    this.append(this.$arrow);\n  }\n});\n\nworkflow.append(link);\nworkflow.append(step1);\nworkflow.append(step2);\n\nconsole.log(workflow.children)\n\n"}},[a("pre",{pre:!0},[a("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" { Workflow, Link, Step } = "),a("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("window")]),s._v(".spriteWorkflow;\n"),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" {Polygon,Label,Polyline,Triangle} = "),a("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("window")]),s._v(".spritejs;\n"),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("let")]),s._v(" stepObject1 = {"),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("id")]),s._v(": "),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'abc-123'")]),s._v(","),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("pos")]),s._v(":[ "),a("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("100")]),s._v(", "),a("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("20")]),s._v(" ],"),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("text")]),s._v(": "),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'我是矩形1'")]),s._v("};\n"),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("let")]),s._v(" stepObject2 = {"),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("id")]),s._v(": "),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'abc-234'")]),s._v(","),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("pos")]),s._v(":[ "),a("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("200")]),s._v(", "),a("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("200")]),s._v(" ],"),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("text")]),s._v(": "),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'我是矩形2'")]),s._v("};\n"),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("let")]),s._v(" workflow = "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" Workflow({\n  "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("selector")]),s._v(":"),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'.block-demo .demo'")]),s._v(","),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("size")]),s._v(":[ "),a("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("400")]),s._v(", "),a("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("300")]),s._v(" ],\n  "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("zoom")]),s._v(": "),a("span",{pre:!0,attrs:{class:"hljs-literal"}},[s._v("false")]),s._v("\n});\n"),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("let")]),s._v(" step1 = "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" Step(stepObject1); "),a("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 创建step")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("let")]),s._v(" step2 = "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" Step(stepObject2);\n\n"),a("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//let linkObject = {startStepId:'abc-123',drawType:'line-abc',endStepId:'abc-234'};")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("let")]),s._v(" linkObject = {"),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("startStepId")]),s._v(":"),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'abc-123'")]),s._v(","),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("drawType")]),s._v(":"),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'polyline-abc'")]),s._v(","),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("endStepId")]),s._v(":"),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'abc-234'")]),s._v("};\n"),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("let")]),s._v(" link = "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" Link(linkObject,{\n  "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("draw")]),s._v(":"),a("span",{pre:!0,attrs:{class:"hljs-function"}},[a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v("("),a("span",{pre:!0,attrs:{class:"hljs-params"}}),s._v(")")]),s._v("{\n    "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".$link = "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" Polyline();\n    "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".$arrow = "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" Triangle();\n    "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" { startPoint, endPoint } = "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".attr();\n    "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".$link.attr({"),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("lineDash")]),s._v(":["),a("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("6")]),s._v(","),a("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("6")]),s._v("],"),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("lineDashOffset")]),s._v(":"),a("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("6")]),s._v(","),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("points")]),s._v(": [ startPoint, endPoint ], "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("lineWidth")]),s._v(": "),a("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1")]),s._v(", "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("color")]),s._v(": "),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'#0ff'")]),s._v("});\n    "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".$arrow.attr({ "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("color")]),s._v(": "),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'#0ff'")]),s._v(", "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("pos")]),s._v(": [ endPoint ], "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("sides")]),s._v(": [ "),a("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("8")]),s._v(", "),a("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("8")]),s._v(" ], "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("angle")]),s._v(": "),a("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("45")]),s._v(", "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("fillColor")]),s._v(": "),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'#0ff'")]),s._v(" })\n    "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".append("),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".$link);\n    "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".append("),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".$arrow);\n  }\n});\n\nworkflow.append(link);\nworkflow.append(step1);\nworkflow.append(step2);\n\n"),a("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("console")]),s._v(".log(workflow.children)\n\n")])])])],1)},[function(){var s=this.$createElement,t=this._self._c||s;return t("p",[this._v("默认的Link的drawType有 "),t("code",{pre:!0},[this._v("['line','polyline']")]),this._v("类型，可以对应的绘制直线，折线，当然如果使用场景中，这两种满足不了要求，可以自定义Link的draw与update方法，方式与自定义Step的draw方法类似。如果link的连接方式与默认相同，可通过drawType 来指定连接类型，如下例中如果drawType为"),t("code",{pre:!0},[this._v("polyline")]),this._v("开头，连接线与折线")])},function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("pre",{pre:!0},[a("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[s._v(" "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("let")]),s._v(" link = "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" Link({…},{\n   "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("draw")]),s._v(":"),a("span",{pre:!0,attrs:{class:"hljs-function"}},[a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v("("),a("span",{pre:!0,attrs:{class:"hljs-params"}}),s._v(")")]),s._v("{\n    "),a("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 此处自定义draw方法")]),s._v("\n   },\n   "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("update")]),s._v(":"),a("span",{pre:!0,attrs:{class:"hljs-function"}},[a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v("("),a("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("newAttrs,oldAttrs")]),s._v(")")]),s._v("{\n     "),a("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 此处自定义link的更新方法")]),s._v("\n   }\n });\n")])])}],!1,null,null,null);t.default=e.exports}}]);