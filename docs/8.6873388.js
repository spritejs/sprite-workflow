(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{112:function(s,t,a){"use strict";var r=function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("section",[a("h2",[s._v("自定义Step显示内容")]),s._v(" "),s._m(0),s._v(" "),s._m(1),s._v(" "),s._m(2),s._v(" "),a("block-demo",{attrs:{tip:"",source:"const { Workflow, Link, Step } = window.spriteWorkflow;\nconst {Polygon,Label,Sprite} = window.spritejs;\nlet stepObject = {id: 'abc-123',drawType:'polygon-my',pos:[ 100, 20 ],text: '我是矩形3'};\nlet stepObject2 = {id: 'abc-1234',drawType:'rect',pos:[ 280, 200 ],text: '我是矩形2'};\nlet linkObject = {startStepId:'abc-123',endStepId:'abc-1234',drawType:'curve',lineAttrs: { color: '#0ff', branchOffset:5 }}\nlet workflow = new Workflow({\n  selector:'.block-demo .demo',size:[ 400, 300 ],\n  zoom: false\n});\nlet step = new Step(stepObject,{\n  draw:function(){\n    this.points = [[-50,-20],[50,-20],[50,20],[-50,20]]; // 四个点组成矩形,中心点在[0,0]\n    let $polygon = new Polygon(); // 创建一个多边形\n    $polygon.attr({points:this.points,fillColor:'#0ff'});\n    let $label = new Label(this.attr('text')); // 为stepObject中的text\n    $label.attr({anchor:[0.5]});// anchor设置为居中对其\n    //加入一张图片\n    const $sprite = new Sprite('https://p5.ssl.qhimg.com/t01a2bd87890397464a.png');\n    $sprite.attr({size:[50,50],anchor:[0.5]}) // anchor设置为居中对其\n    this.append($polygon);\n    this.append($label);\n    this.append($sprite);\n  }\n}); // 创建step\nlet step2 = new Step(stepObject2);\nlet link = new Link(linkObject)\nstep.on('drag',function(e){ //drag事件，同样可以支持，click等等鼠标事件\n  console.log(e);\n})\n\nworkflow.append(step); // 添加step到workflow中\nworkflow.append(step2)\nworkflow.append(link)\n\nconsole.log(workflow.children)\n\n"}},[a("pre",{pre:!0},[a("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" { Workflow, Link, Step } = "),a("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("window")]),s._v(".spriteWorkflow;\n"),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" {Polygon,Label,Sprite} = "),a("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("window")]),s._v(".spritejs;\n"),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("let")]),s._v(" stepObject = {"),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("id")]),s._v(": "),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'abc-123'")]),s._v(","),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("drawType")]),s._v(":"),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'polygon-my'")]),s._v(","),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("pos")]),s._v(":[ "),a("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("100")]),s._v(", "),a("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("20")]),s._v(" ],"),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("text")]),s._v(": "),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'我是矩形3'")]),s._v("};\n"),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("let")]),s._v(" stepObject2 = {"),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("id")]),s._v(": "),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'abc-1234'")]),s._v(","),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("drawType")]),s._v(":"),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'rect'")]),s._v(","),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("pos")]),s._v(":[ "),a("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("280")]),s._v(", "),a("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("200")]),s._v(" ],"),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("text")]),s._v(": "),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'我是矩形2'")]),s._v("};\n"),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("let")]),s._v(" linkObject = {"),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("startStepId")]),s._v(":"),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'abc-123'")]),s._v(","),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("endStepId")]),s._v(":"),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'abc-1234'")]),s._v(","),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("drawType")]),s._v(":"),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'curve'")]),s._v(","),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("lineAttrs")]),s._v(": { "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("color")]),s._v(": "),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'#0ff'")]),s._v(", "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("branchOffset")]),s._v(":"),a("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("5")]),s._v(" }}\n"),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("let")]),s._v(" workflow = "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" Workflow({\n  "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("selector")]),s._v(":"),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'.block-demo .demo'")]),s._v(","),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("size")]),s._v(":[ "),a("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("400")]),s._v(", "),a("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("300")]),s._v(" ],\n  "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("zoom")]),s._v(": "),a("span",{pre:!0,attrs:{class:"hljs-literal"}},[s._v("false")]),s._v("\n});\n"),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("let")]),s._v(" step = "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" Step(stepObject,{\n  "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("draw")]),s._v(":"),a("span",{pre:!0,attrs:{class:"hljs-function"}},[a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v("("),a("span",{pre:!0,attrs:{class:"hljs-params"}}),s._v(")")]),s._v("{\n    "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".points = [["),a("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("-50")]),s._v(","),a("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("-20")]),s._v("],["),a("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("50")]),s._v(","),a("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("-20")]),s._v("],["),a("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("50")]),s._v(","),a("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("20")]),s._v("],["),a("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("-50")]),s._v(","),a("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("20")]),s._v("]]; "),a("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 四个点组成矩形,中心点在[0,0]")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("let")]),s._v(" $polygon = "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" Polygon(); "),a("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 创建一个多边形")]),s._v("\n    $polygon.attr({"),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("points")]),s._v(":"),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".points,"),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("fillColor")]),s._v(":"),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'#0ff'")]),s._v("});\n    "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("let")]),s._v(" $label = "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" Label("),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".attr("),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'text'")]),s._v(")); "),a("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 为stepObject中的text")]),s._v("\n    $label.attr({"),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("anchor")]),s._v(":["),a("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0.5")]),s._v("]});"),a("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// anchor设置为居中对其")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//加入一张图片")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" $sprite = "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" Sprite("),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'https://p5.ssl.qhimg.com/t01a2bd87890397464a.png'")]),s._v(");\n    $sprite.attr({"),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("size")]),s._v(":["),a("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("50")]),s._v(","),a("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("50")]),s._v("],"),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("anchor")]),s._v(":["),a("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0.5")]),s._v("]}) "),a("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// anchor设置为居中对其")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".append($polygon);\n    "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".append($label);\n    "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".append($sprite);\n  }\n}); "),a("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 创建step")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("let")]),s._v(" step2 = "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" Step(stepObject2);\n"),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("let")]),s._v(" link = "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" Link(linkObject)\nstep.on("),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'drag'")]),s._v(","),a("span",{pre:!0,attrs:{class:"hljs-function"}},[a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v("("),a("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("e")]),s._v(")")]),s._v("{ "),a("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//drag事件，同样可以支持，click等等鼠标事件")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("console")]),s._v(".log(e);\n})\n\nworkflow.append(step); "),a("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 添加step到workflow中")]),s._v("\nworkflow.append(step2)\nworkflow.append(link)\n\n"),a("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("console")]),s._v(".log(workflow.children)\n\n")])])])],1)},e=[function(){var s=this.$createElement,t=this._self._c||s;return t("p",[this._v("默认的Step的drawType有 "),t("code",{pre:!0},[this._v("['rect','circle','triangle','star','diamond']")]),this._v("类型，对应可以将步骤绘制出圆、矩形、三角、五角星等，但是可能还是满足不了你的需求。Step有自定义绘制功能。创建step实例的时候，第二个参数，传入draw自定义Step的draw方法，其中sprite-workflow已经打包了"),t("a",{attrs:{href:"https://github.com/spritejs/sprite-extend-shapes"}},[this._v("sprite-extend-shapes")]),this._v("，在绘制图形时，你可以直接使用sprite-extend-shapes的相关特性，当然，你也可以不用。下面示例中的"),t("code",{pre:!0},[this._v("Polygon")]),this._v("即为sprite-extend-shapes的示例。")])},function(){var s=this.$createElement,t=this._self._c||s;return t("p",[this._v("注：如果重写了Step的draw方法，1.绘制的图必须中心对齐(例，如果绘制边长为20的正方形：对应坐标为"),t("code",{pre:!0},[this._v("[[-10,10],[10,10],[10,-10],[-10,10]]")]),this._v("),表示该图形的中心在"),t("code",{pre:!0},[this._v("[0,0]")]),this._v(";\n2.对应的link的update方法，可能也要重写，以保证连线位置的正确性，详细见后面的例子。")])},function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("pre",{pre:!0},[a("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[s._v(" "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("let")]),s._v(" step = "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" Step({…},{\n   "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("draw")]),s._v(":"),a("span",{pre:!0,attrs:{class:"hljs-function"}},[a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v("("),a("span",{pre:!0,attrs:{class:"hljs-params"}}),s._v(")")]),s._v("{\n   "),a("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 此处自定义draw方法")]),s._v("\n   }\n });\n")])])}];a.d(t,"a",function(){return r}),a.d(t,"b",function(){return e})},81:function(s,t,a){"use strict";a.r(t);var r=a(112),e=a(95);for(var n in e)"default"!==n&&function(s){a.d(t,s,function(){return e[s]})}(n);var p=a(2),l=Object(p.a)(e.default,r.a,r.b,!1,null,null,null);t.default=l.exports},95:function(s,t,a){"use strict";a.r(t);var r=a(96),e=a.n(r);for(var n in r)"default"!==n&&function(s){a.d(t,s,function(){return r[s]})}(n);t.default=e.a},96:function(s,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={components:{}}}}]);